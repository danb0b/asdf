<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Rosbridge on Dan Aukes</title><link>https://www.danaukes.com/tags/rosbridge/</link><description>Recent content in Rosbridge on Dan Aukes</description><generator>Hugo</generator><language>en-us</language><atom:link href="https://www.danaukes.com/tags/rosbridge/index.xml" rel="self" type="application/rss+xml"/><item><title>Setting up Rosbridge in Ubuntu</title><link>https://www.danaukes.com/notebook/ros2/40-getting-rosbridge-running/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.danaukes.com/notebook/ros2/40-getting-rosbridge-running/</guid><description>&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>Rosbridge is useful for connecting non-ROS systems to ROS. Matlab, microcontrollers, and other systems often do not have an easy path for installing a full installation of ROS, but have ros-bridge clients that work with Rosbridge. This article shows the following:&lt;/p></description></item><item><title>Setting up Rosbridge in a docker container</title><link>https://www.danaukes.com/notebook/ros2/41-setting-up-rosbridge-on-docker/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.danaukes.com/notebook/ros2/41-setting-up-rosbridge-on-docker/</guid><description>&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>This article shows the following:&lt;/p>
&lt;ul>
&lt;li>how to get rosbridge working in a docker container&lt;/li>
&lt;li>How to create a custom user in a dockerfile&lt;/li>
&lt;li>how to set up rosbridge for use with a physical network, even one through a wifi NIC (which has historically been harder)&lt;/li>
&lt;/ul>
&lt;h2 id="folder-structure">Folder structure&lt;/h2>
&lt;pre tabindex="0">&lt;code>.
├── build
│   ├── Dockerfile
├── docker-compose.yaml
&lt;/code>&lt;/pre>&lt;h2 id="dockerfile">Dockerfile&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">FROM&lt;/span>&lt;span style="color:#d88200"> osrf/ros:humble-desktop&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#00a8c8">WORKDIR&lt;/span>&lt;span style="color:#d88200"> /temp&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#00a8c8">ENV&lt;/span> &lt;span style="color:#111">RMW_IMPLEMENTATION&lt;/span>&lt;span style="color:#f92672">=&lt;/span>rmw_cyclonedds_cpp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">RUN&lt;/span> apt update &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#8045ff">\ &lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> apt install -y &lt;span style="color:#8045ff">\ &lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> iputils-ping &lt;span style="color:#8045ff">\ &lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> software-properties-common &lt;span style="color:#8045ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8045ff">&lt;/span> ros-humble-rmw-cyclonedds-cpp &lt;span style="color:#8045ff">\ &lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> ros-dev-tools &lt;span style="color:#8045ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8045ff">&lt;/span> ros-humble-rosbridge-server&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#00a8c8">ENV&lt;/span> &lt;span style="color:#111">MYUSER&lt;/span>&lt;span style="color:#f92672">=&lt;/span>danaukes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">ENV&lt;/span> &lt;span style="color:#111">MYGROUP&lt;/span>&lt;span style="color:#f92672">=&lt;/span>danaukes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">ENV&lt;/span> &lt;span style="color:#111">MYUID&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">ENV&lt;/span> &lt;span style="color:#111">MYGID&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a8c8">RUN&lt;/span> apt install -y sudo &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#8045ff">\ &lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> addgroup --gid &lt;span style="color:#d88200">${&lt;/span>&lt;span style="color:#111">MYGID&lt;/span>&lt;span style="color:#d88200">}&lt;/span> &lt;span style="color:#d88200">${&lt;/span>&lt;span style="color:#111">MYUSER&lt;/span>&lt;span style="color:#d88200">}&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#8045ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8045ff">&lt;/span> adduser --gecos &lt;span style="color:#d88200">&amp;#39;&amp;#39;&lt;/span> --disabled-password --uid &lt;span style="color:#d88200">${&lt;/span>&lt;span style="color:#111">MYUID&lt;/span>&lt;span style="color:#d88200">}&lt;/span> --gid &lt;span style="color:#d88200">${&lt;/span>&lt;span style="color:#111">MYGID&lt;/span>&lt;span style="color:#d88200">}&lt;/span> &lt;span style="color:#d88200">${&lt;/span>&lt;span style="color:#111">MYUSER&lt;/span>&lt;span style="color:#d88200">}&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#8045ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8045ff">&lt;/span> adduser &lt;span style="color:#d88200">${&lt;/span>&lt;span style="color:#111">MYUSER&lt;/span>&lt;span style="color:#d88200">}&lt;/span> sudo &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#8045ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8045ff">&lt;/span> adduser &lt;span style="color:#d88200">${&lt;/span>&lt;span style="color:#111">MYUSER&lt;/span>&lt;span style="color:#d88200">}&lt;/span> adm &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#8045ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8045ff">&lt;/span> &lt;span style="color:#111">echo&lt;/span> &lt;span style="color:#d88200">&amp;#34;&lt;/span>&lt;span style="color:#d88200">${&lt;/span>&lt;span style="color:#111">MYUSER&lt;/span>&lt;span style="color:#d88200">}&lt;/span>&lt;span style="color:#d88200"> ALL=(ALL) NOPASSWD:ALL&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/sudoers.d/nopasswd&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#00a8c8">USER&lt;/span>&lt;span style="color:#d88200"> ${MYUSER}&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="docker-compose">Docker Compose&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#d88200">&amp;#39;2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ros2&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">build&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">./build&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">user&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">danaukes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">network&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ipv4_address&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#d88200">&amp;#34;192.168.4.8&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dns&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">192.168.4.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#d88200">&amp;#34;9090:9090&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">bash -c &amp;#34;source /opt/ros/humble/setup.bash &amp;amp;&amp;amp; ros2 launch rosbridge_server rosbridge_websocket_launch.xml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">networks&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">network&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">driver&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">ipvlan&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">driver_opts&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">parent&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">wlp1s0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ipvlan-mode&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">l2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ipam&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">driver&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">default&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">config&lt;/span>&lt;span style="color:#111">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">subnet&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">192.168.4.0&lt;/span>&lt;span style="color:#ae81ff">/24&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">gateway&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">192.168.4.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ip_range&lt;/span>&lt;span style="color:#111">:&lt;/span> &lt;span style="color:#ae81ff">192.168.4.1&lt;/span>&lt;span style="color:#ae81ff">/24&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="notes-and-snippets">Notes and snippets&lt;/h2>
&lt;p>may need to run this to enable the kind of networking needed above:&lt;/p></description></item></channel></rss>